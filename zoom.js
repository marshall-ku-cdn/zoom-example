window.Zoom=function(e,t){const n=t&&t.originalizer?t.originalizer:e=>e,r={screenWidth:0,screenHeight:0,scrollBar:0},o=t&&t.background?t.background:null,i=()=>{const{documentElement:e}=document;r.screenWidth=window.innerWidth||e.clientWidth,r.screenHeight=window.innerHeight||e.clientHeight,r.scrollBar=r.screenWidth-e.offsetWidth},d=e=>{(e=>{const t=e.currentSrc||e.src,{srcset:i}=e,{screenWidth:d,screenHeight:s,scrollBar:a}=r,{width:l,height:h,left:m,top:g}=e.getBoundingClientRect(),u=(d-a)/2-m-l/2,v=(s-h)/2-g,f=document.createElement("div"),w=document.createElement("img"),E=()=>{f.classList.remove("zoom-bg--reveal"),w.style.transform="",w.addEventListener("transitionend",()=>{f.remove(),w.remove(),e.classList.remove("zoom-original--hidden")},{once:!0}),f.removeEventListener("click",E),w.removeEventListener("click",E),window.removeEventListener("scroll",E),window.removeEventListener("resize",E)};let L=e.naturalWidth;if(w.style.top=`${g+window.scrollY}px`,w.style.left=`${m}px`,w.style.width=`${l}px`,w.style.height=`${h}px`,f.classList.add("zoom-bg"),o)if("auto"===o){const t=c(e);f.style.background=t?`rgb(${t.r}, ${t.g}, ${t.b})`:"rgb(0, 0, 0)"}else f.style.background=o;if(i){const e=i.match(/ ([0-9]+)w/gm);e&&e.forEach(e=>{const t=+e.trim().replace("w","");t>L&&(L=t)})}L>=d&&(L=d);const p=L*(h/l);p>=s&&(L=L*s/p),w.classList.add("zoom-img"),w.src=t,w.width=l,w.height=h,f.addEventListener("click",E,{once:!0}),w.addEventListener("click",E,{once:!0}),window.addEventListener("scroll",E,{once:!0}),window.addEventListener("resize",E,{once:!0}),document.body.append(f),document.body.append(w),w.offsetWidth,e.classList.add("zoom-original--hidden");const b=L!==l?L/l:1;w.style.transform=`matrix(${b}, 0, 0, ${b}, ${u}, ${v})`,f.classList.add("zoom-bg--reveal"),w.addEventListener("transitionend",()=>{w.src=n(t)})})(e.target)},c=e=>{const t={r:0,g:0,b:0},n=document.createElement("canvas"),r=n.getContext("2d");if(!r)return null;const o=n.width=e.naturalWidth||e.offsetWidth||e.width,i=n.height=e.naturalHeight||e.offsetHeight||e.height;let d,c,s=-4,a=0;r.drawImage(e,0,0);try{d=r.getImageData(0,0,o,i)}catch(e){return null}for(c=d.data.length;(s+=20)<c;)++a,t.r+=d.data[s],t.g+=d.data[s+1],t.b+=d.data[s+2];return t.r=Math.floor(t.r/a),t.g=Math.floor(t.g/a),t.b=Math.floor(t.b/a),t};i(),window.addEventListener("resize",i,{passive:!0}),document.querySelectorAll(e).forEach(e=>{if("IMG"===e.tagName)e.addEventListener("click",d);else{const t=e.querySelector("img");t&&t.addEventListener("click",d)}});const s=document.createElement("style"),a=document.head||document.getElementsByTagName("head")[0];s.appendChild(document.createTextNode(`${e}{cursor:zoom-in}`)),a.appendChild(s)};!function(){const e=document.createElement("style"),t=document.head||document.getElementsByTagName("head")[0];e.appendChild(document.createTextNode(".zoom-bg,.zoom-img{z-index:90000;cursor:zoom-out}.zoom-img{position:absolute;display:block;will-change:transform;transition:transform .3s ease-in-out}.zoom-bg{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#121212;opacity:0;will-change:opacity;transition:opacity .3s ease-in-out}.zoom-bg.zoom-bg--reveal{opacity:.95}.zoom-original--hidden{visibility:hidden}")),t.appendChild(e)}();