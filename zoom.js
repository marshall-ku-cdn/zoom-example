window.Zoom=function(e,t){const o=t&&t.originalizer?t.originalizer:e=>e,n={screenWidth:0,screenHeight:0,scrollBar:0},i=t&&t.background?t.background:null,r=()=>{const{documentElement:e}=document;n.screenWidth=window.innerWidth||e.clientWidth,n.screenHeight=window.innerHeight||e.clientHeight,n.scrollBar=n.screenWidth-e.offsetWidth},c=e=>{(e=>{const t=e.currentSrc||e.src,{srcset:r}=e,{screenWidth:c,screenHeight:s,scrollBar:d}=n,{width:l,height:m,left:g,top:h}=e.getBoundingClientRect(),u=(c-d)/2-g-l/2,p=(s-m)/2-h,f=document.createElement("div"),v=document.createElement("img"),y=()=>{v.classList.add("zoom--removing"),f.classList.remove("zoom-bg--reveal"),v.style.transform="",setTimeout(()=>{f.remove(),v.remove(),e.style.opacity=""},300),f.removeEventListener("click",y),v.removeEventListener("click",y),window.removeEventListener("scroll",y)};let b=e.naturalWidth;if(v.style.top=`${h+window.scrollY}px`,v.style.left=`${g}px`,v.style.width=`${l}px`,v.style.height=`${m}px`,f.classList.add("zoom-bg"),i)if("auto"===i){const t=a(e);f.style.background=t?`rgb(${t.r}, ${t.g}, ${t.b})`:"rgb(0, 0, 0)"}else f.style.background=i;if(r){const e=r.match(/ ([0-9]+)w/gm);e&&e.forEach(e=>{const t=+e.trim().replace("w","");t>b&&(b=t)})}b>=c&&(b=c);const w=b*(m/l);w>=s&&(b=b*s/w),v.classList.add("zoom-img"),v.src=t,v.width=l,v.height=m,document.body.append(f),document.body.append(v),setTimeout(()=>{e.style.opacity="0";const t=m>s?s/m:b!==l?b/l:1;v.style.transform=`matrix(${t}, 0, 0, ${t}, ${u}, ${p})`,f.classList.add("zoom-bg--reveal")},30),setTimeout(()=>{v.src=o(t)},300),f.addEventListener("click",y,{once:!0}),v.addEventListener("click",y,{once:!0}),window.addEventListener("scroll",y,{once:!0})})(e.target)},a=e=>{const t={r:0,g:0,b:0},o=document.createElement("canvas"),n=o.getContext("2d");if(!n)return null;const i=o.width=e.naturalWidth||e.offsetWidth||e.width,r=o.height=e.naturalHeight||e.offsetHeight||e.height;let c,a,s=-4,d=0;n.drawImage(e,0,0);try{c=n.getImageData(0,0,i,r)}catch(e){return null}for(a=c.data.length;(s+=20)<a;)++d,t.r+=c.data[s],t.g+=c.data[s+1],t.b+=c.data[s+2];return t.r=Math.floor(t.r/d),t.g=Math.floor(t.g/d),t.b=Math.floor(t.b/d),t};r(),window.addEventListener("resize",r,{passive:!0}),document.querySelectorAll(e).forEach(e=>{if("IMG"===e.tagName)e.addEventListener("click",c);else{const t=e.querySelector("img");t&&t.addEventListener("click",c)}});const s=document.createElement("style"),d=document.head||document.getElementsByTagName("head")[0];s.appendChild(document.createTextNode(`${e}{cursor:zoom-in}`)),d.appendChild(s)};!function(){const e=document.createElement("style"),t=document.head||document.getElementsByTagName("head")[0];e.appendChild(document.createTextNode(".zoom-bg,.zoom-img{z-index:90000;cursor:zoom-out}.zoom-img{position:absolute;display:block;transition:transform .3s ease-in-out}.zoom-img.zoom--removing>img{z-index:1}.zoom-bg{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#121212;opacity:0;transition:opacity .3s ease-in-out}.zoom-bg.zoom-bg--reveal{opacity:.95}")),t.appendChild(e)}();