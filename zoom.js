window.Zoom=function(e,t){const o=t&&t.originalizer?t.originalizer:e=>e,n={screenWidth:0,screenHeight:0,scrollBar:0},s=t&&t.background?t.background:null,i=()=>{const{documentElement:e}=document;n.screenWidth=window.innerWidth||e.clientWidth,n.screenHeight=window.innerHeight||e.clientHeight,n.scrollBar=n.screenWidth-e.offsetWidth},r=e=>{(e=>{const t=e.currentSrc||e.src,{srcset:i}=e,{screenWidth:r,screenHeight:c,scrollBar:l}=n,d=e.getBoundingClientRect(),{width:m,height:g,left:h,top:u}=d,p=(r-m)/2,f=(c-g)/2,y=(r-l)/2-h-m/2,z=(c-g)/2-u,w=document.createElement("div"),b=document.createElement("div"),v=document.createElement("img");let x=m;if(b.append(w),b.style.top=`${u+window.scrollY}px`,b.style.left=`${h}px`,b.style.width=`${m}px`,b.style.height=`${g}px`,document.body.append(b),w.classList.add("zoom__bg"),w.style.width=`${r}px`,w.style.height=`${c+.2}px`,w.style.top=`${-f-.1}px`,w.style.left=`${-p}px`,s)if("auto"===s){const t=a(e);w.style.background=t?`rgb(${t.r}, ${t.g}, ${t.b})`:"rgb(0, 0, 0)"}else w.style.background=s;b.classList.add("zoom"),b.append(v);const $=/[0-9]+w/gm;if(g<=c&&i){const e=i.match($);if(e){const t=g/m;(x=r>m?+e.reduce((e,t)=>`${Math.max(+e.replace("w",""),+t.replace("w",""))}`):m)>=r&&(x=r);const o=x*t;o>=c&&(x=x*c/o)}}v.classList.add("zoom__img"),v.src=t,v.srcset=i,v.width=m,v.height=g,setTimeout(()=>{const n=o(t);e.style.opacity="0",b.style.transform=`translate3d(${y}px, ${z}px, 0)`,w.classList.add("zoom__bg--reveal"),x!==m&&(v.style.transform=`scale(${x/m})`),g>c&&(v.style.transform=`scale(${c/g})`),v.src=n,v.srcset=""},30);const _=()=>{b.classList.add("zoom--removing"),w.removeAttribute("style"),b.style.transform="",v.removeAttribute("style"),setTimeout(()=>{b.remove(),e.style.opacity=""},300),window.removeEventListener("scroll",_)};b.addEventListener("click",_,{once:!0}),window.addEventListener("scroll",_,{once:!0})})(e.target)},a=e=>{const t={r:0,g:0,b:0},o=document.createElement("canvas"),n=o.getContext("2d");if(!n)return null;const s=o.width=e.naturalWidth||e.offsetWidth||e.width,i=o.height=e.naturalHeight||e.offsetHeight||e.height;let r,a,c=-4,l=0;n.drawImage(e,0,0);try{r=n.getImageData(0,0,s,i)}catch(e){return null}for(a=r.data.length;(c+=20)<a;)++l,t.r+=r.data[c],t.g+=r.data[c+1],t.b+=r.data[c+2];return t.r=Math.floor(t.r/l),t.g=Math.floor(t.g/l),t.b=Math.floor(t.b/l),t};i(),window.addEventListener("resize",i,{passive:!0}),document.querySelectorAll(e).forEach(e=>{if("IMG"===e.tagName)e.addEventListener("click",r);else{const t=e.querySelector("img");t&&t.addEventListener("click",r)}})};!function(){const e=document.createElement("style"),t=document.head||document.getElementsByTagName("head")[0];e.appendChild(document.createTextNode(".zoom{position:absolute;top:0;left:0;width:100%;height:100%;transition:transform .3s ease-in-out;z-index:90000;cursor:zoom-out}.zoom>.zoom__img{position:relative;z-index:2;transition:transform .3s ease-in-out;cursor:zoom-out}.zoom.zoom--removing>img{z-index:1}.zoom__bg{position:absolute;background:#121212;opacity:0;transition:opacity .3s ease-in-out}.zoom__bg.zoom__bg--reveal{opacity:.95}")),t.appendChild(e)}();