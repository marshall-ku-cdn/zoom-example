window.Zoom=function(e,t){const n=t&&t.originalizer?t.originalizer:e=>e,o={screenWidth:0,screenHeight:0,scrollBar:0},r=t&&t.background?t.background:null,i=()=>{const{documentElement:e}=document;o.screenWidth=window.innerWidth||e.clientWidth,o.screenHeight=window.innerHeight||e.clientHeight,o.scrollBar=o.screenWidth-e.offsetWidth},c=e=>{(e=>{const t=e.currentSrc||e.src,{srcset:i}=e,{screenWidth:c,screenHeight:s,scrollBar:a}=o,{width:l,height:h,left:m,top:g}=e.getBoundingClientRect(),u=(c-a)/2-m-l/2,f=(s-h)/2-g,v=document.createElement("div"),w=document.createElement("img"),E=()=>{v.classList.remove("zoom-bg--reveal"),w.style.transform="",setTimeout(()=>{v.remove(),w.remove(),e.classList.remove("zoom-original--hidden")},300),v.removeEventListener("click",E),w.removeEventListener("click",E),window.removeEventListener("scroll",E)};let p=e.naturalWidth;if(w.style.top=`${g+window.scrollY}px`,w.style.left=`${m}px`,w.style.width=`${l}px`,w.style.height=`${h}px`,v.classList.add("zoom-bg"),r)if("auto"===r){const t=d(e);v.style.background=t?`rgb(${t.r}, ${t.g}, ${t.b})`:"rgb(0, 0, 0)"}else v.style.background=r;if(i){const e=i.match(/ ([0-9]+)w/gm);e&&e.forEach(e=>{const t=+e.trim().replace("w","");t>p&&(p=t)})}p>=c&&(p=c);const b=p*(h/l);b>=s&&(p=p*s/b),w.classList.add("zoom-img"),w.src=t,w.width=l,w.height=h,v.addEventListener("click",E,{once:!0}),w.addEventListener("click",E,{once:!0}),window.addEventListener("scroll",E,{once:!0}),document.body.append(v),document.body.append(w),w.offsetWidth,e.classList.add("zoom-original--hidden");const L=p!==l?p/l:1;w.style.transform=`matrix(${L}, 0, 0, ${L}, ${u}, ${f})`,v.classList.add("zoom-bg--reveal"),w.addEventListener("transitionend",()=>{w.src=n(t)})})(e.target)},d=e=>{const t={r:0,g:0,b:0},n=document.createElement("canvas"),o=n.getContext("2d");if(!o)return null;const r=n.width=e.naturalWidth||e.offsetWidth||e.width,i=n.height=e.naturalHeight||e.offsetHeight||e.height;let c,d,s=-4,a=0;o.drawImage(e,0,0);try{c=o.getImageData(0,0,r,i)}catch(e){return null}for(d=c.data.length;(s+=20)<d;)++a,t.r+=c.data[s],t.g+=c.data[s+1],t.b+=c.data[s+2];return t.r=Math.floor(t.r/a),t.g=Math.floor(t.g/a),t.b=Math.floor(t.b/a),t};i(),window.addEventListener("resize",i,{passive:!0}),document.querySelectorAll(e).forEach(e=>{if("IMG"===e.tagName)e.addEventListener("click",c);else{const t=e.querySelector("img");t&&t.addEventListener("click",c)}});const s=document.createElement("style"),a=document.head||document.getElementsByTagName("head")[0];s.appendChild(document.createTextNode(`${e}{cursor:zoom-in}`)),a.appendChild(s)};!function(){const e=document.createElement("style"),t=document.head||document.getElementsByTagName("head")[0];e.appendChild(document.createTextNode(".zoom-bg,.zoom-img{z-index:90000;cursor:zoom-out}.zoom-img{position:absolute;display:block;will-change:transform;transition:transform .3s ease-in-out}.zoom-bg{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#121212;opacity:0;will-change:opacity;transition:opacity .3s ease-in-out}.zoom-bg.zoom-bg--reveal{opacity:.95}.zoom-original--hidden{visibility:hidden}")),t.appendChild(e)}();